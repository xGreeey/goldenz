/**
 * Font Override for Accessibility
 * Ensures consistent, readable fonts throughout the entire project
 * Optimized for users with poor eyesight
 * Includes emoji font support to prevent rectangle display
 */

/* Emoji font fallback - ensures emojis render correctly */
@font-face {
    font-family: 'Emoji Fallback';
    src: local('Apple Color Emoji'),
         local('Segoe UI Emoji'),
         local('Segoe UI Symbol'),
         local('Noto Color Emoji'),
         local('EmojiOne Color');
    unicode-range: U+1F300-1F9FF, U+2600-26FF, U+2700-27BF, U+1F600-1F64F, U+1F680-1F6FF, U+1F1E0-1F1FF;
}

/* Universal font application - highest priority with emoji support */
*,
*::before,
*::after {
    font-family: 'Google Sans', 'Product Sans', 'Inter', 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 
                 'EmojiOne Color', 'Twemoji Mozilla' !important;
    font-variant-emoji: emoji !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Number rendering fix - ensure numeric values use numeric-friendly fonts */
/* This is a global fallback - number-rendering-fix.css has more specific rules */
.stat-number,
.card-number,
.quick-stat-value,
.metric-header h4,
.rate-number,
[class*="number"],
[class*="stat"],
.number,
.count,
.value,
.total {
    font-family: 'Segoe UI', 'Segoe UI Historic', Arial, Helvetica, 'Helvetica Neue', 
                 -apple-system, BlinkMacSystemFont, 'Roboto', 'Oxygen', 'Ubuntu', 
                 'Cantarell', 'Fira Sans', 'Droid Sans', sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Ensure all text elements use accessible font sizes */
body, html {
    font-size: 16px !important; /* WCAG minimum recommendation */
    line-height: 1.7 !important; /* Increased for better readability */
    font-family: 'Google Sans', 'Product Sans', 'Inter', 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 
                 'EmojiOne Color', 'Twemoji Mozilla' !important;
}

/* Form elements */
input, textarea, select, button {
    font-size: 16px !important; /* Prevents zoom on iOS */
    font-family: 'Google Sans', 'Product Sans', 'Inter', 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
    line-height: 1.6 !important;
}

/* Tables */
table, th, td {
    font-size: 1rem !important;
    font-family: 'Google Sans', 'Product Sans', 'Inter', 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
    line-height: 1.6 !important;
}

/* Cards and containers */
.card, .card-body, .card-header, .card-title {
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
}

/* Buttons */
.btn {
    font-size: 1rem !important;
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
    line-height: 1.6 !important;
}

/* Alerts */
.alert {
    font-size: 1rem !important;
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
    line-height: 1.7 !important;
}

/* Labels */
label, .form-label {
    font-size: 1rem !important;
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
    font-weight: 500 !important;
}

/* Small text - minimum readable size */
small, .small, .text-muted {
    font-size: 0.9375rem !important; /* 15px minimum for readability */
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
    line-height: 1.6 !important;
}

/* Headings */
h1, h2, h3, h4, h5, h6 {
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
}

/* Paragraphs and text content */
p, span, div, a, li, td, th {
    font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif,
                 'Emoji Fallback', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
}

/* Emoji-specific support - ensures emojis render correctly */
.emoji, [class*="emoji"], [data-emoji] {
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', 'EmojiOne Color', 'Twemoji Mozilla' !important;
    font-style: normal !important;
    font-weight: normal !important;
}

/* Ensure icons render with the proper font and weight */
i[class*="fa-"], .fas, .far, .fal, .fab {
    font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', 'Font Awesome 6 Brands', 'Font Awesome 5 Brands' !important;
    font-style: normal !important;
    font-weight: 900 !important; /* solid weight */
    speak: none;
}

/* Font Awesome renders many icons via ::before; our global *::before font override can break them */
i[class*="fa-"]::before,
i[class*="fa-"]::after,
.fas::before, .fas::after,
.far::before, .far::after,
.fal::before, .fal::after,
.fab::before, .fab::after,
.fa-solid::before, .fa-solid::after,
.fa-regular::before, .fa-regular::after,
.fa-brands::before, .fa-brands::after {
    font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', 'Font Awesome 6 Brands', 'Font Awesome 5 Brands' !important;
    font-style: normal !important;
}

/* Prevent emoji rendering issues - force emoji font stack for all text content */
/* Also ensure tabular numbers for all text elements */
body, p, span, div, a, li, td, th, label, input, textarea, select, button, h1, h2, h3, h4, h5, h6 {
    font-variant-emoji: emoji !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* --- Sidebar visual overrides (ensure dropdowns are clearly visible) --- */
.sidebar .nav-submenu {
    background: #ffffff !important;          /* solid white dropdown panel */
    border-radius: 10px !important;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.45) !important;
}

.sidebar .nav-submenu .nav-link {
    color: #0f172a !important;               /* dark text on white */
}

.sidebar .nav-submenu .nav-link:hover {
    background: #f1f5f9 !important;
    color: #0f172a !important;
}

.sidebar .nav-submenu .nav-link.active {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(59, 130, 246, 0.12) 100%) !important;
    color: #0f172a !important;
}
