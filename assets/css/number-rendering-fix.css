/**
 * Number Rendering Fix for Windows 10/11
 * Fixes numeric values displaying as boxes instead of digits
 * Ensures proper font fallbacks and tabular number alignment
 * 
 * Requirements:
 * - Numbers display correctly on all browsers and OS versions (Windows 10, 11)
 * - Use numeric-friendly font such as 'Segoe UI', with fallbacks like Arial and Helvetica
 * - Enable tabular numbers to maintain proper alignment in cards and tables
 * - Apply font smoothing and rendering optimizations for better clarity
 * - Target all number elements (e.g., .stat-number)
 */

/* ============================================
   UNIVERSAL NUMBER RENDERING FIX
   ============================================ */

/* Primary number display classes */
.stat-number,
.card-number,
.quick-stat-value,
.metric-header h4,
.rate-number,
.stat-value,
.metric-value,
.count-value,
.total-value,
.number-display {
    /* Numeric-friendly font stack - Segoe UI first for Windows, then fallbacks */
    font-family: 'Segoe UI', 'Segoe UI Historic', Arial, Helvetica, 'Helvetica Neue', 
                 -apple-system, BlinkMacSystemFont, 'Roboto', 'Oxygen', 'Ubuntu', 
                 'Cantarell', 'Fira Sans', 'Droid Sans', sans-serif !important;
    
    /* Enable tabular numbers for proper alignment */
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    
    /* Font rendering optimizations for clarity */
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    font-smooth: always !important;
    
    /* Ensure proper character encoding and direction */
    unicode-bidi: embed !important;
    direction: ltr !important;
}

/* ============================================
   SPECIFIC CLASS FIXES
   ============================================ */

/* Stat number - dashboard statistics */
.stat-number {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Card number - card displays */
.card-number {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Quick stat values */
.quick-stat-value {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Metric header numbers */
.metric-header h4,
.metric-header h3,
.metric-header h2 {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Rate numbers */
.rate-number {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ============================================
   GENERIC NUMBER ELEMENTS
   ============================================ */

/* Any element with "number" in class name */
[class*="number"],
[class*="stat"],
[class*="count"],
[class*="value"],
[class*="total"],
[class*="metric"] {
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Direct number classes */
.number,
.count,
.value,
.total,
.metric {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ============================================
   HEADING ELEMENTS WITH NUMBERS
   ============================================ */

h1.stat-number,
h2.stat-number,
h3.stat-number,
h4.stat-number,
h5.stat-number,
h6.stat-number,
h1.card-number,
h2.card-number,
h3.card-number,
h4.card-number,
h5.card-number,
h6.card-number {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ============================================
   BADGES AND STATUS INDICATORS
   ============================================ */

.badge,
.badge-success-modern,
.badge-primary-modern,
.badge-warning-modern,
.badge-danger-modern,
.badge-info-modern,
.badge-secondary-modern,
.status-badge,
.alert-badge,
.priority-badge,
.nav-badge {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ============================================
   TABLES
   ============================================ */

/* All table cells - numbers in tables need proper alignment */
table td,
table th {
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Table cells with numeric content */
table td.number,
table th.number,
table .number-cell {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ============================================
   FORM INPUTS
   ============================================ */

/* Number inputs */
input[type="number"],
input[type="tel"],
.number-input,
input.number {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Text inputs that may contain numbers */
input[type="text"].number,
input[type="text"][class*="number"] {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* ============================================
   PAGINATION AND CONTROLS
   ============================================ */

.pagination-info,
.pagination-controls span,
.pagination-controls button,
.page-number,
.page-count {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ============================================
   CROSS-BROWSER COMPATIBILITY
   ============================================ */

/* Modern browsers with tabular-nums support */
@supports (font-variant-numeric: tabular-nums) {
    .stat-number,
    .card-number,
    .quick-stat-value,
    .metric-header h4,
    .rate-number,
    table td,
    table th {
        font-variant-numeric: tabular-nums;
    }
}

/* Fallback for browsers that don't support font-variant-numeric */
@supports not (font-variant-numeric: tabular-nums) {
    .stat-number,
    .card-number,
    .quick-stat-value,
    .metric-header h4,
    .rate-number {
        font-family: 'Courier New', 'Courier', monospace !important;
        letter-spacing: 0.05em;
    }
}

/* ============================================
   WINDOWS-SPECIFIC OPTIMIZATIONS
   ============================================ */

/* Internet Explorer and Edge Legacy */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
    .stat-number,
    .card-number,
    .quick-stat-value,
    .metric-header h4,
    .rate-number,
    table td,
    table th {
        font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
        -ms-font-feature-settings: 'tnum';
    }
}

/* Windows 10/11 specific - ensure Segoe UI is used */
@supports (-webkit-appearance: none) {
    .stat-number,
    .card-number,
    .quick-stat-value,
    .metric-header h4,
    .rate-number {
        font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    }
}

/* ============================================
   ADDITIONAL ELEMENTS
   ============================================ */

/* Stat footer */
.stat-footer {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Card subtitle */
.card-subtitle {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Employee numbers and IDs */
.employee-number,
.employee-id,
.user-id,
.record-id {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* Date and time displays */
.date-number,
.time-number,
.entry-time,
.timestamp {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Calendar numbers */
.calendar-navigation h4,
.date-number {
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif !important;
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* ============================================
   FORCE NUMERIC RENDERING FOR ALL TEXT
   ============================================ */

/* Apply tabular numbers to all text elements that might contain numbers */
body,
p,
span,
div,
a,
li,
td,
th,
label,
input,
textarea,
select,
button,
h1,
h2,
h3,
h4,
h5,
h6 {
    font-variant-numeric: tabular-nums !important;
    font-feature-settings: 'tnum' !important;
    -webkit-font-feature-settings: 'tnum' !important;
    -moz-font-feature-settings: 'tnum' !important;
    -ms-font-feature-settings: 'tnum' !important;
}

/* Ensure font rendering optimizations are applied globally */
* {
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}
