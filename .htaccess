DirectoryIndex index.php

# Block sensitive files (keep OUTSIDE IfModule)
<FilesMatch "^(\.env|.*\.log)$">
    Require all denied
</FilesMatch>

<IfModule mod_rewrite.c>

    RewriteEngine On

    # Don't rewrite real files/folders (let them be served directly)
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]

    # Redirect root URL to landing page
    RewriteRule ^$ /landing/ [R=302,L]

    # Redirect URLs with .php extension to clean URLs (without .php)
    # Exclude root index.php (needed for logout handling)
    # Exclude api/ directory (API endpoints need .php extension)
    RewriteCond %{THE_REQUEST} \s/+(.+?)\.php(\?[^\s]*)?\s [NC]
    RewriteCond %{REQUEST_URI} !^/index\.php$ [NC]
    RewriteCond %{REQUEST_URI} !^/api/ [NC]
    RewriteRule ^(.*)\.php$ /$1 [R=302,L,QSA]

    # Landing page - handle /landing/ and /landing
    RewriteRule ^landing/?$ landing/index.php [L]

    # HR ADMIN clean routes
    RewriteRule ^hr-admin/?$ hr-admin/index.php [L]
    RewriteRule ^hr-admin/([^/]+)/?$ hr-admin/index.php?page=$1 [L,QSA]

    # SUPER ADMIN clean routes
    RewriteRule ^super-admin/?$ super-admin/index.php [L]
    RewriteRule ^super-admin/([^/]+)/?$ super-admin/index.php?page=$1 [L,QSA]

    # Add .php extension internally for clean URLs
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule ^(.*)$ $1.php [L,QSA]

</IfModule>
